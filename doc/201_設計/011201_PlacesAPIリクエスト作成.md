# PlacesAPIリクエスト作成

## 1. 概要
駅すぱあと API にを使用して、駅データの取得を行い、
PostgreSQL の DB に格納。
独自定義のデータも DB に格納した上で、SQL によりデータを加工し、
Google Cloud Platform の Places API のリクエストで使用する、
駅の 緯度経度 を記したデータを作成する。

## 2. 個別処理概要
- 対象都道府県CSV読込 (対象都道府県CSV → 対象都道府県TBL)
- 独自定義鉄道路線CSV読込 (独自定義鉄道路線CSV → 独自定義鉄道路線TBL)
- データ取得対象鉄道路線CSV読込 (データ取得対象鉄道路線CSV → データ取得対象鉄道路線TBL)

- リクエスト用都道府県情報CSV出力 (対象都道府県TBL → リクエスト用都道府県情報一時CSV)
- 鉄道会社情報APIデータ取得 (リクエスト用都道府県情報一時CSV → 駅すぱあとAPI → 鉄道会社情報一時CSV)
- 鉄道会社情報テーブル読込 (鉄道会社情報一時CSV → 鉄道会社TBL)

- リクエスト用鉄道会社情報CSV出力 (鉄道会社TBL → リクエスト用鉄道会社情報一時CSV)
- 鉄道路線情報APIデータ取得 (リクエスト用鉄道会社情報一時CSV → 駅すぱあとAPI → 鉄道路線情報一時CSV)
- 鉄道路線情報テーブル読込 (鉄道路線情報一時CSV → 鉄道路線TBL)
- 路線独自定義情報付与 (鉄道路線TBL ・ 独自定義鉄道路線TBL → 路線独自定義情報付与TBL)
- 路線情報とりまとめ (路線独自定義情報付与TBL → 路線情報TBL)
- データ取得対象路線絞込 (路線情報TBL → 取得対象路線絞込TBL)

- リクエスト用鉄道路線情報CSV出力 (取得対象路線絞込TBL → リクエスト用鉄道路線情報一時CSV)
- 駅情報APIデータ取得 (リクエスト用鉄道路線情報一時CSV → 駅すぱあとAPI → 駅情報一時CSV)
- 駅情報テーブル読込 (駅情報一時CSV → 駅基本情報TBL)

- 駅情報重複削除 (駅基本情報TBL → 駅情報重複削除TBL)
- PlacesAPIリクエスト用CSV出力 (駅情報重複削除TBL → PlacesAPIリクエスト用CSV)
- リクエストデータレポート出力 (駅情報重複削除TBL → リクエストデータレポートTXT)


## 3. 処理フロー

![](01510201_PlacesAPIリクエスト作成_処理フロー図.drawio.svg)

