# 駅データCSV作成

## 1. 概要
駅すぱあと API による、駅データの取得と、
GoogleMaps Place API による 緯度経度 での周辺検索データを利用して、
駅周辺にコーヒーチェーン店の情報をまとめたCSVデータを作成する。
データの加工には、PostgreSQLによるデータベース操作を使用する。

## 2. 個別処理概要
- 都道府県マスタCSV読み込み (都道府県マスタCSV → 都道府県マスタTBL)
- 対象都道府県CSV読み込み (対象都道府県CSV → 対象都道府県TBL)
- 対象鉄道会社CSV読み込み (対象鉄道会社CSV → 対象鉄道会社TBL)
- 対象路線情報CSV読み込み (対象鉄道路線CSV → 対象鉄道路線TBL)
- 対象都道府県鉄道会社情報読み込み (駅すぱあとAPI → 一時CSV → 鉄道会社TBL)
- 対象鉄道会社存在チェック
  - 鉄道会社TBL と 対象鉄道会社TBL を照らし合わせて、マスタCSVのデータが最新の会社情報に存在することを確認する処理
- 対象路線情報読み込み (駅すぱあとAPI → 一時CSV → 鉄道路線TBL)
- 対象路線絞り込み・路線追加情報付与 (対象鉄道路線TBL → 路線追加情報付与TBL)
- カラーコード変換処理 (路線追加情報付与TBL → 路線カラーコード付与TBL)
- 駅緯度経度情報CSV出力 (路線カラーコード付与TBL → 一時CSV)
- カフェ情報読み込み (一時CSV → GoogleMaps Place API → 一時CSV → カフェ情報TBL)
- カフェ情報付与 (カフェ情報TBL x 路線カラーコード付与TBL → 駅周辺カフェ情報付与TBL)
- CSV出力用テーブル挿入 (駅周辺カフェ情報付与TBL → 鉄道カフェ情報出力TBL)
- 駅データCSV出力 (鉄道カフェ情報出力TBL → 鉄道カフェ情報CSV)

