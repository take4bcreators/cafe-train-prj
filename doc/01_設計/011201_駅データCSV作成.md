# 駅データCSV作成

## 1. 概要
駅すぱあと API による、駅データの取得と、
GoogleMaps Place API による 緯度経度 での周辺検索データを利用して、
駅周辺にコーヒーチェーン店の情報をまとめたCSVデータを作成する。
データの加工には、PostgreSQLによるデータベース操作を使用する。

## 2. 個別処理概要
- 都道府県マスタCSV読み込み (マスタCSV → マスタテーブル)
- 対象都道府県CSV読み込み (マスタCSV → マスタテーブル)
- 対象鉄道会社CSV読み込み (マスタCSV → マスタテーブル)
- 対象路線情報CSV読み込み (マスタCSV → マスタテーブル)
- 対象都道府県鉄道会社情報読み込み (駅すぱあとAPI → 一時CSV → マスタテーブル)
- 対象鉄道会社存在チェック
  - 対象鉄道会社情報 と 対象都道府県鉄道会社情報 を照らし合わせて、マスタCSVのデータが最新の会社情報に存在することを確認する処理
- 対象路線情報読み込み (駅すぱあとAPI → 一時CSV → マスタテーブル)
- 対象路線絞り込み・カスタムデータ付与 (マスターテーブル → tmpテーブル)
- カラーコード変換処理 (tmpテーブルカラム追加)
- 駅緯度経度情報CSV出力 (tmpテーブル → 一時CSV)
- カフェ情報読み込み (一時CSV → GoogleMaps Place API → 一時CSV → マスタテーブル)
- カフェ情報付与 (マスタテーブル x tmpテーブル → tmpテーブル)
- CSV出力用テーブル挿入 (tmpテーブル → 出力用マスタテーブル)
- 駅データCSV出力 (出力用マスタテーブル → 駅データCSV)

